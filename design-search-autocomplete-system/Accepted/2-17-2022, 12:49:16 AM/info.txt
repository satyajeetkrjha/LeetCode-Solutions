{"id":643063225,"lang":"cpp","time":"6 months, 1 week","timestamp":1645076956,"status_display":"Accepted","runtime":"690 ms","url":"/submissions/detail/643063225/","is_pending":"Not Pending","title":"Design Search Autocomplete System","memory":"312.8 MB","code":"class Node {\npublic:\n    unordered_map<char, Node*> children;\n    unordered_map<string, int> counter;\n    Node() {};\n};\n\nclass AutocompleteSystem {\npublic:\n    AutocompleteSystem(vector<string> sentences, vector<int> times) {\n        for (int i = 0; i < sentences.size(); i++) {\n            add(sentences[i], times[i]);\n        }\n    }\n    \n    vector<string> input(char c) {\n        if (c == '#') {\n            add(prefix, 1);\n            prefix.clear();\n            return {};\n        }\n        prefix += c;\n        Node* node = root;\n        for (char ch : prefix) {\n            if (!node -> children[ch]) {\n                return {};\n            }\n            node = node -> children[ch];\n        }\n        priority_queue<pair<int, string>, vector<pair<int, string>>, compare> pq;\n        for (auto p : node -> counter) {\n            pq.push({p.second, p.first});\n        }\n        vector<string> autocomplete;\n        for (int i = 0; i < 3 && !pq.empty(); i++) {\n            autocomplete.push_back(pq.top().second);\n            pq.pop();\n        }\n        return autocomplete;\n    }\nprivate:\n    Node* root = new Node();\n    string prefix;\n    \n    struct compare {\n        bool operator()(pair<int, string>& l, pair<int, string>& r) {\n            return l.first < r.first || (l.first == r.first && l.second.compare(r.second) > 0);\n        }\n    };\n    \n    void add(string sentence, int time) {\n        Node* node = root;\n        for (char c : sentence) {\n            if (!node -> children[c]) {\n                node -> children[c] = new Node();\n            }\n            node = node -> children[c];\n            node -> counter[sentence] += time;\n        }\n    }\n};","compare_result":"1111111111111111111111111111111111111111111","title_slug":"design-search-autocomplete-system"}